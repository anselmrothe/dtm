UC Merced
Proceedings of the Annual Meeting of the Cognitive Science
Society
Title
Visual Analogies at Multiple Levels of Abstraction
Permalink
https://escholarship.org/uc/item/1kf1x6xz
Journal
Proceedings of the Annual Meeting of the Cognitive Science Society, 29(29)
Authors
Yaner, Patrick W.
Goel, Ashok K.
Publication Date
2007-01-01
Peer reviewed
 eScholarship.org                                  Powered by the California Digital Library
                                                                    University of California

                             Visual Analogies at Multiple Levels of Abstraction
                                                 Patrick W. Yaner (yaner@cc.gatech.edu)
                                                   Ashok K. Goel (goel@cc.gatech.edu)
                                                        Design Intelligence Laboratory
                                    School of Interactive Computing, Georgia Institute of Technology
                                                            Atlanta, GA 30332-0760
                                                                                                 
                               Abstract                                                             
                                                                                                         
   We describe a method for constructing a teleological model of                                                                                                                                                                   
   an unlabelled 2D line drawing by analogy to a known model                                                                                                                                                                            
   of a drawing with similar structure. The source case is repre-                                                     
   sented as a schema that contains its line drawing and its teleo-                                                        
   logical model represented at multiple levels of abstraction: the                                                      
   lines and intersections in the drawing, the shapes, the structural            a
   components and connections, the causal interactions and pro-                                                                                                                                                                                                                 
   cesses, and the function of the device depicted in the drawing.
   Given a target drawing and a relevant source case, our method
                                                                                                                                                                                                                                                                                       
   of compositional analogy first constructs a representation of                                                                                                                                                                                                                                                              
   the lines and the intersections in the target drawing, then uses                                                                                                                                                                                                                                                                                
   the mappings at the level of line intersections to transfer the
   shape representations from the source case to the target, next
   uses the mappings at the level of shapes to transfer the full tele-
   ological model of the depicted system from the source to the                  b
   target.                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                
   Keywords: diagrammatic reasoning; analogy; visual reason-
   ing; case-based reasoning; design
                                                                                                                                                                                                            
                                                                                                                                                                                                                       
                                                                                 c
                                                                                                                                                                                                                                                                                                                                                                            
                    Motivation and Goals
Humans often communicate with drawings, and human de-                       Figure 1: (a) A sample source drawing of a piston and
signers are able to read and understand drawings of designs.               crankshaft assembly. (b) A target drawing of the same de-
When shown a drawing of a new device, an expert designer
                                                                           vice with the piston now at the top of its range of motion,
in the device domain may not only identify device compo-
nents but also explain what the device does and how it works.              and (c) another sample target drawing of a two piston and
We have developed a theory of how this might be done: by                   crankshaft assembly. The shape patterns as well as the SBF
transfer of a teleological model of a known drawing with a                 model is transferred from the source (a) to an input drawing
similar or related structure. This theory is implemented in                such as (b) or (c).
a program called Archytas. This program reads in a 2D un-
labelled drawing and, given the source drawing and associ-
ated teleological model, attempts to infer by analogy, (1) a               then be used to find a consistent mapping between the graphs
representation of the shapes and spatial relations in the tar-             representing the source and target drawings. However, the
get drawing, (2) a representation of the structural components             method runs into difficulty for the target drawing shown in
and connections of the device depicted in the drawing, (3) a               figure 1(c) with figure 1(a) as the source drawing. In this
qualitative representation of the causal interactions and pro-             problem, the number of components, and thus the number
cesses in the device, and (4) a representation of the function             of shapes, is different, and either the graph-theoretic method
of the device. This method of compositional analogy works                  would have to relax the constraint of one-to-one mapping, or
iteratively to successively higher levels of abstraction, inter-           else the analogy would have to be performed twice in order to
leaving mapping and transfer at various levels to construct a              transfer a model successfully from figure 1(a) to figure 1(c).
new teleological model.                                                    Figure 2 illustrates a similar example from the domain of door
   To see the need for mapping and transfer at multiple ab-                latches.
straction levels, let us consider the task of mapping the source              To address the above difficulties, our method of compo-
drawing illustrated in figure 1(a) to the similar target drawing           sitional analogy performs analogy at multiple levels of ab-
illustrated in figure 1(b). If we treat the problem as one of              straction. The analogical mapping and transfer is enabled
first recognizing the geometric elements and spatial relations             by organizing knowledge of the source case at multiple ab-
among them, then we can treat this representation as a la-                 straction levels. Figure 3 illustrates the knowledge organi-
belled graph: A contains B, C is adjacent to D, and so on.                 zation in a source case. The function, behavior, structure,
A graph-theoretic method for analogy-based recognition may                 shape, and drawing in a source case form an abstraction hi-
                                                                       1671

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Functional Spec
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Behavioral Model
                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Connections           depict    Composite shapes
        a                                                                                                                                                                                                                                                                                                                                                                    b
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Components and
                  
                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              depict      Basic shapes
                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               parameters
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                              
                              
                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                        
                                     
                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                   
                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                      
                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Line segments, arcs,
                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                 
                                                                  
                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                     ! "
                                                                                                                                                                                                                                                                                                                                                                                      "              ! "!                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       and intersections
                                                                                                                                                                                                                                                                                                                                                                                    "!"           ! "!                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                                                         
                                                                           
                                                                                                                                                                                                                                                                                                                                                                                      "!"          ! "!                                                                                                                                                                                                                                              
                                                                             
                                                                                                                                                                                                                                                                                                                                                                                  "!"         ! "!                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                        "!"        ! "!
                                                                                      
                                                                                      
                                                                                      
                                                                                                                                                                                                                                                                                                                                                                          "           !  "     ! "!
                                                                                           
                                                                                                                                                                                                                                                                                                                                                                        "          !  "     ! "!
                                                                                                
                                                                                                
                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                            ! "
                                                                                                                                                                                                                                                                                                                                                                                                  "         ! "!                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                               
                                                                                                                 
                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Drawing
                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                              
                                                                                                                              
                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
            c
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Figure 3: The multi-level hierarchy of drawing, basic shapes,
Figure 2: (a) A sample source drawing of a door latch mech-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     and composite shapes, related to the teleological model on
anism. (b) A target drawing of the same device with the door                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    the left with its components and connections between com-
latch now pulled inward, and (c) another sample target draw-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ponents. Basic shapes depict components, and composite
ing of a double door latch (a latch on each side). Again the                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    shapes, made up of basic shapes, depict connections between
shape patterns as well as the SBF model is transferred from                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     components.
the source (a) to an input drawing such as (b) or (c).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                morphic. However, whether or not two symbol structures are
erarchy called a DSSBF (Drawing Shape Structure Behav-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          aligned depends on how the shapes in the structures are de-
ior Function) model. Structure in this hierarchy is a spec-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     composed. Figure 4 shows three structurally incompatible
ification of components and structural relations, along with                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ways of representing even a very basic shape. To address this
properties (height, width, etc.) and variable parameters (e.g.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  issue, we represent shapes in the source case at multiple levels
position, angle) of each. Behavior is a qualitative represen-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   of abstraction, and use the shape representation in the source
tation of discrete states and transitions, where transitions are                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                to help resolve ambiguities in constructing a representation of
annotated with the causes of that state transition. Function is                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 shapes in the target.
an abstraction of behavior, the purpose for which the device
is intended, and is represented as an input-output schema.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Basic and Composite Shapes
These DSSBF models extend our earlier work on Structure-
Behavior-Function (SBF) models (Goel & Chandrasekaran,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          The first step of the process is to match each shape in the
1989; Goel, 1991).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              source to the target drawing. We need a robust and canonical
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                representation of shapes, one that is robust in face of the vi-
   Our method of compositional analogy first gathers indi-
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                sual binding problem: line segments should match regardless
vidual lines and circles and intersection points in the target
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                of whether they are drawn in the vector graphics file as a sin-
drawing into shapes, and then finds mappings between the
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                gle vector or as multiple vectors. For instance, the rectangle
source and the target at this level of intersections. Then, it
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                corresponding to the upper half of the cylinder in figure 1(a)
groups these mappings and transfers shapes from the source
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                might be drawn as four perpendicular lines, or it might be six
to the target. Next, it finds a mapping between the source
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                lines (if the edge touching the piston is three segments instead
and the target at the shape level, and then transfers the struc-
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                of one); the shape must match either way. This is achieved us-
tural model. This transfer process produces a mapping at the
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ing what we call the augmented line intersection graph of the
level of components and connections among them, and the
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                drawing, shown in figure 5 (Yaner & Goel, 2007).
method uses this structure-level mapping to transfer the be-
haviors from source to target. Finally, the method uses the                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        The line intersection graph represents the most basic topo-
behavioral-level mapping to construct a functional represen-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    logical information in the drawing. To reduce the search
tation of the depicted device.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  space for mapping, Archytas augments this graph with ad-
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ditional spatial information. Firstly, since each intersection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                is a pair of line (or arc) sets, Archytas adds a flag on each
                The Structure of Shapes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         edge (intersection) indicating perpendicularity. This prevents
When a drawing is represented symbolically for analogical                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       Archytas from matching, say, a rectangle to a rhombus. Sec-
comparison, symbols typically are associated with shapes. In                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ondly, each topological face in the drawing bounded by a cy-
this symbolic representation, the shape, which is a composite                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   cle of line and arc sets is represented as a special vertex linked
geometric structure (a point set in the real plane), becomes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    to the points and lines on its boundary. This represents the
an atomic entity. If analogy involves the alignment of symbol                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   planar dual of the input drawing (regarded as a plane graph).
structures, then analogical comparison between two drawings                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Archytas represents the basic elements of a 2D line drawing
can only be successful when these symbol structures are iso-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    (line segments, circles and circular arcs) using this augmented
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           1672

          a                                b
                                                                          a
          d                                c
                                                                          b
Figure 4: Three structurally inconsistent ways of decompos-           Figure 5: An example of (a) a line drawing of a piston and
ing (a) a simple compound cross shape: (b) an outline cross           crankshaft with fill patterns and layering ignored (as they are
shape with an inner square, (c) a pair of overlapping rectan-        in Archytas), and (b) its corresponding line intersection graph
gles, or even (d) four squares touching at the corners.               representation: L stand for for line, C for circle, A for arc
                                                                      (edge labels have been omitted for clarity). In addition, each
                                                                      bounded region (or face) is represented as a separate node
line intersection graph, which takes lines and arcs and circles
as nodes and intersections between them as labelled arcs.             (not shown) linked to the vertices and edges on its boundary.
   Depending on the perspective of the drawing, a particular          The dotted lines indicate collinear but disconnected lines.
component may be depicted by an actual shape, regarded as a
set of connected lines or arcs, or not at all. When a component
is depicted by a shape, which is a subgraph of the intersection       that overlap with four basic shapes. The crankcase and it’s
graph. Each component in the model shown in figure 6 is              structural relations, recall, are undepicted.
linked to a subgraph of the intersection graph called a “basic           In order to match these shapes to either figure 1(b) or fig-
shape”. A connection between components in the model is a             ure 1(c), Archytas first begins by trying to compute a sub-
union of several entities, and so each connection is linked to        graph isomorphism from each composite shape to the target
a subgraph called a “composite shape.” A composite shape              intersection graph. Upon finding these, Archytas breaks the
is a union of two or more “basic shapes”, forming a larger            composite shape mappings into corresponding basic shape
subgraph of the intersection graph. This forms the right half         mappings, so that when two composites with a basic shape
of the multi-level hierarchy shown in figure 3.                       in common overlap in the mapping as well, that basic shape
                                                                      can be inferred of the target.
          Analogical Mapping and Transfer
The goal of the mapping stage is to align shapes in the repre-
                                                                      Symmetric Mappings
sentations of the source and target drawings by finding corre-
spondences between the basic and composite shapes in their
augmented line intersection graphs. In particular, Archytas           In figure 1(a), the composite shape corresponding to the
attempts to find mappings from each basic and composite               piston-cylinder connection has four potential mappings onto
shape to some subgraph of the target drawing’s line intersec-         the target 1(b). The piston/connecting-rod connection has
tion graph. Here the mapping must be exact: each element of           two rectangles and some circles as its constituents, and there
the shape description must match, and so the algorithm is one        are again four mappings to the target, but not each of them
of subgraph isomorphism.                                             overlaps properly with each mapping for the piston-cylinder
   The source drawing is divided into basic and composite            shape. Thus, if we chose the wrong pair, we might get two
shapes. The drawing in figure 1(a), for instance, has the fol-       pistons instead of one, with one connected to the connecting
lowing depicted components, each of which has one basic              rod, and the other connected to the cylinder. This is clearly
shape associated with it: (i) piston, (ii) connecting rod, (iii)     an error of reasoning.
crankshaft, and (iv) cylinder. In addition, the following struc-         Note that the various mappings of a single shape in the
tural relations are shown in the drawing, each of which has          target are symmetric. To see this, let m1 , m2 be two mappings
a composite shape associated with it: (i) cylindrical joint be-      for a shape. In general, m1 and m2 may map the source shape
tween piston and cylinder, (ii) revolute joint between piston        onto different areas of the target, but if they do not, they still
and connecting rod, and (iii) revolute joint between connect-        may be incompatible. For instance, if a, b, c are the corners
ing rod and crankshaft. Thus there are three composite shapes        of a triangle in the source, and x, y, z of a similar one in the
                                                                 1673

                                                                      ric means that the set of points being mapped are identical in
                                                                      both, even if the details of the mapping are not.
                                                                         To constrain potential mappings, when two lines or inter-
                                                                      section points are both on the boundary of a common face
                                                                      or region in the drawing, so must those they map to in the
                                                                      target. Also, there are two additional constraints: (1) per-
                                                                      pendicular intersections map to perpendicular intersections,
                                                                      but non-perpendicular intersections map to either perpendic-
                                                                      ular or non-perpendicular intersections (so for instance a non-
                                                                      right triangle in the source can map to a right triangle in the
                                                                      target but not the other way around), and (2) lines only map
                                                                      to lines, circles to circles, and arcs to arcs. The outline of the
                                                                     algorithm is as follows:
Figure 6: An illustration of the structural model showing
components (boxes) and structural relations (ovals). Prop-          1. Apply each composite shape, matching it to the target
erties and variable parameters of components are specified in            drawing as many times as possible using backtracking con-
                                                                         straint satisfaction with the composite shape elements as
slot values for each component frame.
                                                                         variables, target intersection graph elements as values, and
                                                                         matching graph structure as constraints.
target, we might have:                                                   • Group symmetric composite shape mappings
               m1 : a 7→ x              m2 : a 7→ z
                                                                    2. For each composite shape mapping, break it into its basic
               m1 : b 7→ y              m2 : b 7→ y                      shape mappings
               m1 : c 7→ z              m2 : c 7→ x                      • Group symmetric basic shape mappings
These two mappings are symmetric and therefore equivalent:
                                                                    3. For each set of symmetric basic and composite shape map-
both are mapping the same shape to the same points in the
                                                                         pings, instantiate a new shape in the target drawing
target but in different orientations. This is important from the
perspective of transfer: the target shape will be identical with
both mappings, so they are effectively equivalent.                  4. Return a mapping from the source shapes to the target
   We can then group symmetric mappings into sets. Archy-                shapes that each one instantiated
tas computes all mappings of each composite shape in the tar-
get, and divide them into these sets of symmetric mappings.          Note that, in general, this shape-level mapping will not be
For each such set, the composite shape mappings are divided          one-to-one, and this is part of the idea for mapping from fig-
into basic shape mappings and these two are grouped using            ure 1(a) to figure 1(c) could be found.
symmetry. Archytas then transfers one composite shape in
the target for each group of composite shape mappings, and           Transfer of Structural Elements
one basic shape for each group of basic shape mappings. The          Once Archytas has a mapping between the basic and com-
algorithms are presented in the next section.                        posite shapes of the source drawing and newly instantiated
                                                                     shapes of the target drawing, it needs to transfer the struc-
Shape Mapping and Transfer                                           tural model from the source to the target. From these shape-
The goal of the shape transfer algorithm is to bring struc-          level mappings we can hypothesize that if two shapes match
ture to the target drawing: that is, to use patterns to divide       then they should therefore depict the same component, and
the lines and intersections into basic and composite shapes,         likewise for composite shapes and connections. The steps
which inform Archytas of visual patterns depicting compo-            are to begin with the mapped shapes, and transfer the com-
nents and structural relations. It is important to compute           ponents and connections depicted by those mapped shapes,
all the mappings of a given shape so that all the relation-          reconstructing the model iteratively.
ships can be found. Each mapping group informs a new                     As input to the structure transfer process, Archytas has a set
shape in the target. The result is a shape-level mapping: a          of shape-level maps, basic shape maps and composite shape
mapping at the level of whole shapes rather than individ-            maps, each one associating a source shape with a newly in-
ual lines and intersection points. From here, the transfer of        stantiated target shape. From each one we can hypothesize
structural elements—components and structural relations—             a structural element, along with all its properties and vari-
can take place. This process is illustrated in figure 7.             able parameters. The only difficulty is that some components
   The algorithm treats shape matching as one of satisfying          are undepicted. For instance, in figure 1, neither figure de-
constraints. Each composite shape in the source is treated as        picts the crankcase. Archytas transfers undepicted compo-
a pattern, and the elements of the intersection graph in the         nents based on their connections to other components actu-
target are matched to that pattern. Archytas attempts to find        ally shown in the drawing. The output of this process is a
all consistent ways of matching a given pattern to a drawing,        new structural model of the target and a mapping from the
grouping symmetric ones as discussed above, where symmet-            source to the target that, once again, may not be one-to-one.
                                                                 1674

                                              Source Model                 Transferred Target Model
                                                                           Output from Archytas
           Functional Spec                                                                                      Functional Spec
          Behavioral Model                                                                                      Behavioral Model
            Connections         depict      Composite shapes                 Composite shapes     depict          Connections
          Components and                                                                                        Components and
          parameters            depict        Basic shapes                      Basic shapes      depict             parameters
                                           Line segments, arcs,             Line segments, arcs,   Generated upon input
                                           and intersections                    and intersections
                                                Source            Mapping             Input
                                                Drawing         and Transfer      Drawing
Figure 7: The multi-level hierarchy shown in figure 3 is transferred onto the target by first generating the line intersection
graph of the input drawing, and then matching first composite shapes and then, when two composites overlap appropriately,
basic shapes. Each basic and composite shape implies a component and structural relation, respectively, thereby suggesting a
hypothetical structural model of the target. This component-level mapping is then used to transfer behavior and function.
Transfer of Behavior and Function                                          Since the representation of function is simpler in SBF, the
                                                                        transfer of function is straightforward. A functional speci-
With a structural mapping in place, Archytas now needs to               fication consists of an input and an output state, and a link
transfer behavior. Each behavior is a sequence of qualita-              to a behavior by which the function is realized. Since these
tive states of one of the components, and so the structural             states are behavioral states, the transfer of function is simply
mapping directly informs the behavioral mapping to be con-              a lookup in the behavioral mapping.
structed. However, there is a major complication: transitions
in SBF can be annotated by a number of causes: conditions               Results
under which the transition may take place, for instance, other
transitions which trigger this one, states of other components          Archytas has been implemented in Common Lisp. There
which must hold, important structural relations which allow             were 26 test drawings for Archytas (including source draw-
the transition to occur, parametric equations, primitive func-          ings) across three domains: that of the piston and crankshaft
tions, and so on. Since the structural mapping may not be               examples (figure 1), that of the door latch examples (figure
one-to-one, the behavioral mapping may not be, either. For              2), and that of pulley systems (not shown). These drawings
instance, if a given transition in one behavior is caused by            representing a range of kinds of differences between source
another transition in another behavior, and the mapping of              and target. The results are summarized in table 1.
behaviors to behaviors (tracking that of components) is not                Two interesting results are for the targets in figure 1(c) (the
one-to-one, then which behavior is it linked to?                        two piston and single crankshaft example) with 1(a) and its
   Take, for example, the single piston crankshaft source with          model as the source, and that of figure 2(c) (the double door
the double piston crankshaft target, figures 1(a) and (c). The          latch) with 2(a) as it’s source. In both cases, the “correct”
downwards motion of the piston is caused by an external                 model for each target had two of some components and one
stimulus, but the upwards motion is caused by the continuing            of others. In the piston and crankshaft example this worked
rotation of the crankshaft through the connecting rod. Thus,            correctly, as each individual basic and composite shape pat-
the transition of downward motion to upward motion occurs               tern fit and overlapped just as it should have, producing the
under the condition that the connecting rod so moves (which             correct model. However, in the door latch example, the door
in turn occurs under condition that the crankshaft continues to         shape—the two rectangles above and below the bolt—have
turn, which it does so according to physical principles). But           changed. Now there are two of them surrounded by a rect-
there are two pistons in the target, so for each piston, which          angle (left side of the drawing and the right side) instead of
state transition, which rod’s behavior, causes its own? The             just one, and this changes the shape, so that the door shape
answer is clear: the behavior of the rod connected to that pis-         cannot match the drawing. Since this component was criti-
ton. Thus, for each component, Archytas computes a sphere               cal to the model, the transfer of the model failed. In general,
of influence, which is the set of other components that com-            the method is robust when the shape patterns do not change
ponent is connected to, those connections themselves, and all           structurally—e.g. by gaining in complexity—but only in their
the properties, parameters, and primitive functions of all of           configuration. As new drawings may contain unknown shape
the components. When a behavior reference any of these ele-             patterns, we would like the method to be able to acquire these
ments, it is assumed to be within that sphere of influence.             new patterns, but this remains future work.
                                                                   1675

          Difference                  PC     DL     PL                the mappings at the level of shapes to transfer the structural
          Device State                yes    yes    yes               model of the device, and finally uses mappings at the struc-
          Dimension                   yes    yes    yes               tural level to transfer the behavioral and functional represen-
          Orientation                 yes    yes    yes               tations of the device. We have shown that by relaxing the
          Perspective                 no     no     no                constraints of one-to-one mapping and by interleaving the
          Component Shapes            no     no     no               mapping and transfer processes, a model can be inferred of
          Number of Components        yes    no     no                the device depicted in a drawing by analogy without any pre-
                                                                     defined vocabulary of shapes beyond those that are actually
Table 1: A brief summary of the differences between the              present in a known drawing.
                                                                         Analogy-based comprehension is often presented as the
source and target drawings that Archytas can and cannot
                                                                     problem of analogical mapping (Falkenhainer et al., 1990;
handle: PC refers to differences tested with the piston and          Holyoak & Thagard, 1989), and specifically that of struc-
crankshaft example, DL refers to the door latch example, and         tural alignment of existing representations. As a result, the
PL refers to a third domain, that of pulleys. The categories         tendency is to regard an analogy as an alignment or mapping,
are differences in the state of the device, the dimensions of        even when multiple mappings are used. Mappings at multiple
some of the components, the orientation of the drawing in 2          levels of abstraction and aggregation requires an expansion of
dimensions, the perspective of the drawing in 3 dimensions,          this view. For instance a whole mapping at one level can be-
differences in the shapes of components, and differences in          come a single “match hypothesis” at the next level. The role
the number of components.                                            of mappings with respect to transfer thus changes when we
                                                                     consider analogy as a mechanism for constructing models at
                                                                     multiple levels of abstraction.
                       Related Work
GeoRep (Ferguson & Forbus, 2000) is a diagrammatic rea-
                                                                                           Acknowledgments
soning system which takes an arbitrary 2D line drawing as            This research has been supported in part by an NSF (IIS)
input and gives as output a description of the physical system       grant (Award number 0534266) on Multimodal Case-Based
depicted in the drawing. GeoRep is organized as a two-stage          Reasoning in Modeling and Design.
forward-chaining reasoner, in which a line drawing passes
through a domain-independent low-level relational describer                                      References
(LLRD) that recognizes lines and polygons, and from there a          Falkenhainer, B., Forbus, K. D., & Gentner, D. (1990). The
high-level relational describer (HLRD) that applies a domain-                structure-mapping engine: Algorithm and examples.
specific rule set to produce a final representation of the sys-              Artificial Intelligence, 41, 1–63.
tem in the diagram. Applications of applications of GeoRep           Ferguson, R. W., & Forbus, K. D. (2000). GeoRep: A flexible
typically derive structure from shape in HLRD; some appli-
                                                                             tool for spatial representation of line drawings. In Proc.
cations have also used structure-mapping (Falkenhainer, For-
bus, & Gentner, 1990) for making further inferences by anal-                 17th National Conf. on Artificial Intelligence (AAAI-
ogy largely at the level of structure. By contrast, our work                 2000). Austin, Texas: AAAI Press.
infers both shape and structure by analogy.                          Goel, A. K. (1991). Model revision: A theory of incremen-
   Recently Klenk et al. (Klenk, Forbus, Tomai, Kim, & Ky-                   tal model learning. In Proc. 8th International Conf. on
ckelhahn, 2005) have developed a system for answering ques-                  Mchine Learning (ICML-91) (pp. 605–609). San Ma-
tions about simple mechanical systems using sketches. Their                  teo, CA: Morgan Kaufmann.
system has an user draw glyphs as separate entities and pro-         Goel, A. K., & Chandrasekaran, B. (1989). Functional rep-
vide conceptual labels for these glyphs, so that the system                  resentation in design and redesign problem solving. In
need only compute the low-level visual relationships between                 Proc. 11th International Joint Conf. on Artificial Intel-
the glyphs. It then uses structure mapping for making candi-                 ligence (IJCAI-89) (p. 1388-1394). San Mateo, CA:
date inferences to complete the user-supplied model for use                  Morgan Kaufmann.
by a qualitative physical reasoner to answer questions about
                                                                     Holyoak, K. J., & Thagard, P. (1989). Analogical mapping by
the physical system. Unlike Archytas, Klenk et. al.’s system
does not recognize sketches or drawings. Further, their sys-                 constraint satisfaction. Cognitive Science, 13(3), 295–
tem does not use analogy to infer the entire model, but only                 355.
to make inferences about an incomplete model given by the            Klenk, M., Forbus, K. D., Tomai, E., Kim, H., & Kyckel-
user, and to aid in answering a question.                                    hahn, B. (2005). Solving everyday physical reasoning
                                                                             problems by analogy using sketches. In Proc. 20th Na-
                        Conclusions                                          tional Conf. on Artificial Intelligence (AAAI-05) (pp.
In this paper, we considered the task of acquisition of a tele-              209–215). Menlo Park, CA: AAAI Press.
ological model of a kinematics device from a 2D line draw-           Yaner, P. W., & Goel, A. K. (2007). Understanding draw-
ing of that device by constructing its teleological model. Our               ings by compositional analogy. In Proc. 20th Interna-
method of compositional analogy first constructs a represen-                 tional Joint Conf. on Artificial Intelligence (IJCAI-07)
tation of the lines and the intersections in the target drawing,             (pp. 1131–1137). San Mateo, CA: Morgan Kaufmann.
then uses mappings at the level of line intersections to trans-
fer shape patterns from the source case to the target, next uses
                                                                 1676

